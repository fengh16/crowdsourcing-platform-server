<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>task-templates/guess-number - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="module-model_session-RedisSession.html">RedisSession</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-model_session-RedisSession.html#genId">genId</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-model_session-RedisSession.html#load">load</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-model_session-RedisSession.html#loadAndRemove">loadAndRemove</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-model_session-RedisSession.html#remove">remove</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-model_session-RedisSession.html#removeByIndex">removeByIndex</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-model_session-RedisSession.html#save">save</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="module-models_assignments-Assignment.html">Assignment</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-models_assignments-Assignment.html#toPlainObject">toPlainObject</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="module-models_jwt-Jwt.html">Jwt</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-models_jwt-Jwt.html#getSecretKey">getSecretKey</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-models_jwt-Jwt.html#revoke">revoke</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-models_jwt-Jwt.html#setSecretKey">setSecretKey</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-models_jwt-Jwt.html#sign">sign</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-models_jwt-Jwt.html#verify">verify</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="module-models_tasks-Task.html">Task</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-models_tasks-Task.html#toPlainObject">toPlainObject</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="module-models_users-User.html">User</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-models_users-User.html#checkPassword">checkPassword</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-models_users-User.html#toPlainObject">toPlainObject</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="module-server-Server.html">Server</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-server-Server.html#.normalizeConfig">normalizeConfig</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-server-Server.html#start">start</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-server-Server.html#stop">stop</a></span></li><li class="nav-heading">Modules</li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-api.html">api</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-api_multer.html">api/multer</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-api_multer.html#~multer">multer</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-api_utils.html">api/utils</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-api_utils.html#~coreToMiddleware">coreToMiddleware</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-core_assignment.html">core/assignment</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-core_assignment.html#~createAssignment">createAssignment</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-core_assignment.html#~deleteAssignment">deleteAssignment</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-core_assignment.html#~findAssignment">findAssignment</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-core_assignment.html#~getAssignment">getAssignment</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-core_assignment.html#~getAssignmentData">getAssignmentData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-core_assignment.html#~patchAssignment">patchAssignment</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-core_assignment.html#~postAssignmentData">postAssignmentData</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-core_auth.html">core/auth</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-core_auth.html#~authenticate">authenticate</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-core_email.html">core/email</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-core_email.html#~confirmEmail">confirmEmail</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-core_email.html#~sendEmail">sendEmail</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-core_errors.html">core/errors</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-core_task.html">core/task</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-core_task.html#~createTask">createTask</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-core_task.html#~deleteTask">deleteTask</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-core_task.html#~findTask">findTask</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-core_task.html#~getTask">getTask</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-core_task.html#~getTaskData">getTaskData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-core_task.html#~patchTask">patchTask</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-core_task.html#~postTaskData">postTaskData</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-core_user.html">core/user</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-core_user.html#~createUser">createUser</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-core_user.html#~deleteUser">deleteUser</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-core_user.html#~findUser">findUser</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-core_user.html#~getUser">getUser</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-core_user.html#~getUserData">getUserData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-core_user.html#~patchUser">patchUser</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-core_user.html#~postUserData">postUserData</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-core_utils.html">core/utils</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-core_utils.html#~makeThumbnail">makeThumbnail</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-koa-logger.html">koa-logger</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-koa-logger.html#~koaLogger">koaLogger</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-model_session.html">model/session</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-models_assignments.html">models/assignments</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-models_hook.html">models/hook</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-models_hook.html#~addCreatedAt">addCreatedAt</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-models_hook.html#~addDeleted">addDeleted</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-models_hook.html#~addFileFields">addFileFields</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-models_hook.html#~addUpdatedAt">addUpdatedAt</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-models_jwt.html">models/jwt</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-models_tasks.html">models/tasks</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-models_users.html">models/users</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-server.html">server</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-task-templates_guess-number.html">task-templates/guess-number</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-task-templates_guess-number.html#~assignmentDataToPlainObject">assignmentDataToPlainObject</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-task-templates_guess-number.html#~assignmentDataToPlainObject">assignmentDataToPlainObject</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-task-templates_guess-number.html#~assignmentStatusChanged">assignmentStatusChanged</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-task-templates_guess-number.html#~assignmentStatusChanged">assignmentStatusChanged</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-task-templates_guess-number.html#~createAssignment">createAssignment</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-task-templates_guess-number.html#~createAssignment">createAssignment</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-task-templates_guess-number.html#~getAssignmentData">getAssignmentData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-task-templates_guess-number.html#~getAssignmentData">getAssignmentData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-task-templates_guess-number.html#~getTaskData">getTaskData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-task-templates_guess-number.html#~getTaskData">getTaskData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-task-templates_guess-number.html#~postAssignmentData">postAssignmentData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-task-templates_guess-number.html#~postAssignmentData">postAssignmentData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-task-templates_guess-number.html#~postAssignmentDataMiddleware">postAssignmentDataMiddleware</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-task-templates_guess-number.html#~postAssignmentDataMiddleware">postAssignmentDataMiddleware</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-task-templates_guess-number.html#~postTaskData">postTaskData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-task-templates_guess-number.html#~postTaskData">postTaskData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-task-templates_guess-number.html#~postTaskDataMiddleware">postTaskDataMiddleware</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-task-templates_guess-number.html#~postTaskDataMiddleware">postTaskDataMiddleware</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-task-templates_guess-number.html#~taskDataToPlainObject">taskDataToPlainObject</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-task-templates_guess-number.html#~taskDataToPlainObject">taskDataToPlainObject</a></span></li><li class="nav-heading"><a href="global.html">Globals</a></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#getTaskTypes">getTaskTypes</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">task-templates/guess-number</h1>
    

    




<section>

<header>
    
        
            
        
            
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description"><p>图片标注任务类型，发布者为每个作业上传图片，提出数个问题，由承接者对图片进行文字标注来回答。</p>
<p>任务和作业本身的多态性是建立在<code>task.data</code>和<code>assignment.data</code>这两个无schema的数据上的。</p>
<p>团片标注任务<code>task.data</code>主要包含了以下几个字段：</p>
<ul>
<li>question {string} 问题</li>
<li>choiceAmount {number} 问题的选项数量</li>
<li>choices {string[]} 问题的各个选项</li>
<li>progress {number} 当前的委派进度，每创建一个作业加一</li>
<li>images {string[]} 解压后的数据的文件名，在dir下</li>
<li>submitMultipleTimes {boolean} 可选设置，是否允许一个人参与多次，默认false</li>
<li>signupMultipleTimes {boolean} 可选设置，是否允许一个人被拒后再次报名，默认false</li>
<li>noSignup {boolean} 可选设置，是否自动完成报名的步骤（即无需报名），默认false</li>
<li>submitAutoPass {boolean} 可选设置，是否自动审批任务（即任务提交即接受），默认false</li>
<li>dir {string} 内部使用，这是<code>uploads</code>目录下属于该工程的文件夹。</li>
<li>signedUsers {string[]} 内部使用，对于非noSignup，这是报名了的用户的列表</li>
<li>blockedUsers {string[]} 内部使用，对于非noSignup且非signupMultipleTimes，这是封禁用户的列表</li>
<li>exported {boolean} 内部使用，项目是否导出</li>
</ul>
<p>而<code>assignment.data</code>主要包含了以下几个字段，而<code>assignment.valid</code>对于非signup类任务，表示能否继续猜：</p>
<ul>
<li>signup {boolean} 表示这是一个用于注册的任务</li>
<li>answer {string[]} 对于非signup类任务，这是对图片的标注结果(每张图可能有多个题目，故有多个标注答案)</li>
</ul></div>
        

        
            
<div class="section-method">







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_mark-image.js.html">task-templates/mark-image.js</a>, <a href="task-templates_mark-image.js.html#line1">line 1</a>
    </li></ul></dd>
    

    

    

    
</dl>























</div>
        
            
<div class="section-method">







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_guess-number.js.html">task-templates/guess-number.js</a>, <a href="task-templates_guess-number.js.html#line1">line 1</a>
    </li></ul></dd>
    

    

    

    
</dl>























</div>
        
    
    </div>

    

    

    

     

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            
<div class="section-method">

    

    <h4 class="name" id="~assignmentDataToPlainObject"><span class="type-signature">(inner) </span>assignmentDataToPlainObject<span class="signature">(assignment, auth)</span><span class="type-signature"> &rarr; {object}</span></h4>

    



<div class="description">
    <p>将<code>assignment.data</code>转换为对象发送给对应可见性的人。这个函数会在createAssignment、
getAssignmentData或者getAssignmentData返回undefined的时候默认调用。
理论上，调用者是订阅者或者发布者。</p>
<p>对本任务而言，只有作业是一个非报名作业才返回数据，如下：</p>
<ul>
<li>sequence {number} 题号</li>
<li>finished {boolean} 是否完成</li>
<li>answer {number} 答案</li>
<li>image {string} 图片名，在task.data.dir下</li>
</ul>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_mark-image.js.html">task-templates/mark-image.js</a>, <a href="task-templates_mark-image.js.html#line260">line 260</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>assignment</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>auth</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>object</code></span>


    </dd>
</dl>


    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="~assignmentDataToPlainObject"><span class="type-signature">(inner) </span>assignmentDataToPlainObject<span class="signature">(assignment, auth)</span><span class="type-signature"> &rarr; {object}</span></h4>

    



<div class="description">
    <p>将<code>assignment.data</code>转换为对象发送给对应可见性的人。这个函数会在createAssignment、
getAssignmentData或者getAssignmentData返回undefined的时候默认调用。
理论上，调用者是订阅者或者发布者。</p>
<p>对本任务而言，只有作业是一个非报名作业才返回数据，如下：</p>
<ul>
<li>guessTimes {number} 猜测次数</li>
<li>finished {boolean} 是否完成</li>
<li>answer {boolean} 答案（完成之后才返回）</li>
</ul>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_guess-number.js.html">task-templates/guess-number.js</a>, <a href="task-templates_guess-number.js.html#line228">line 228</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>assignment</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>auth</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>object</code></span>


    </dd>
</dl>


    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="~assignmentStatusChanged"><span class="type-signature">(async, inner) </span>assignmentStatusChanged<span class="signature">(assignment, params, global)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>

    



<div class="description">
    <p>这个函数是作业状态更改的钩子，确保作业的状态发生更改，可能的更改包括订阅者从编辑到提交，同时作业必须为valid，
以及发布者从提交到接受或拒绝。assignment会被保存。</p>
<p>本任务主要是处理自动pass和验证通过的逻辑的。</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_guess-number.js.html">task-templates/guess-number.js</a>, <a href="task-templates_guess-number.js.html#line327">line 327</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>assignment</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>global</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;void></code></span>


    </dd>
</dl>


    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="~assignmentStatusChanged"><span class="type-signature">(async, inner) </span>assignmentStatusChanged<span class="signature">(assignment, params, global)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>

    



<div class="description">
    <p>这个函数是作业状态更改的钩子，确保作业的状态发生更改，可能的更改包括订阅者从编辑到提交，同时作业必须为valid，
以及发布者从提交到接受或拒绝。assignment会被保存。</p>
<p>本任务主要是处理自动pass和验证通过的逻辑的。</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_mark-image.js.html">task-templates/mark-image.js</a>, <a href="task-templates_mark-image.js.html#line365">line 365</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>assignment</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>global</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;void></code></span>


    </dd>
</dl>


    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="~createAssignment"><span class="type-signature">(async, inner) </span>createAssignment<span class="signature">(task, assignment, params, global)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>

    



<div class="description">
    <p>创建任务，这里已经确保提交者为订阅者，且任务处于<code>PUBLISHED</code>状态。原则上，这个过程结束后，
应当设置好<code>valid</code>、<code>status</code>、<code>summary</code>、<code>data</code>的字段。如果该函数缺省，则会创建一个
不valid、编辑状态、无<code>summary</code>和<code>data</code>字段的任务。assignment会被保存。</p>
<p>如果这个函数没有返回值，则依据情况调用assignmentDataToPlainObject。
如果有返回值则会作为响应。</p>
<p>对于本任务而言，主要确认创建的是一个报名作业还是图片标注作业。</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_mark-image.js.html">task-templates/mark-image.js</a>, <a href="task-templates_mark-image.js.html#line303">line 303</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>task</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>任务对象</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>assignment</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>作业对象</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>请求的数据</p>
<ul>
<li>query 请求的query<ul>
<li>populate {boolean} 是否返回</li>
<li>data {boolean} 是否返回数据</li>
</ul>
</li>
<li>data 请求的data<ul>
<li>task {string} 任务</li>
<li>data {object} 额外的数据<ul>
<li>signup {boolean} 是否是报名任务</li>
</ul>
</li>
</ul>
</li>
</ul>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>global</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;void></code></span>


    </dd>
</dl>


    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="~createAssignment"><span class="type-signature">(async, inner) </span>createAssignment<span class="signature">(task, assignment, params, global)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>

    



<div class="description">
    <p>创建任务，这里已经确保提交者为订阅者，且任务处于<code>PUBLISHED</code>状态。原则上，这个过程结束后，
应当设置好<code>valid</code>、<code>status</code>、<code>summary</code>、<code>data</code>的字段。如果该函数缺省，则会创建一个
不valid、编辑状态、无<code>summary</code>和<code>data</code>字段的任务。assignment会被保存。</p>
<p>如果这个函数没有返回值，则依据情况调用assignmentDataToPlainObject。
如果有返回值则会作为响应。</p>
<p>对于本任务而言，主要确认创建的是一个报名作业还是真正的猜数字作业。</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_guess-number.js.html">task-templates/guess-number.js</a>, <a href="task-templates_guess-number.js.html#line271">line 271</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>task</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>任务对象</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>assignment</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>作业对象</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>请求的数据</p>
<ul>
<li>query 请求的query<ul>
<li>populate {boolean} 是否返回</li>
<li>data {boolean} 是否返回数据</li>
</ul>
</li>
<li>data 请求的data<ul>
<li>task {string} 任务</li>
<li>data {object} 额外的数据<ul>
<li>signup {boolean} 是否是报名任务</li>
</ul>
</li>
</ul>
</li>
</ul>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>global</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;void></code></span>


    </dd>
</dl>


    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="~getAssignmentData"><span class="type-signature">(async, inner) </span>getAssignmentData<span class="signature">(assignment, params, global)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>

    



<div class="description">
    <p>获取作业的数据。这里已经确保要么提交者为作业的订阅者或发布者。如果这个函数没有返回值，
则会依据情况调用assignmentDataToPlainObject。如果有返回值则会作为响应。</p>
<p>对于本任务，就采用默认的assignmentDataToPlainObject。</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_mark-image.js.html">task-templates/mark-image.js</a>, <a href="task-templates_mark-image.js.html#line457">line 457</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>assignment</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>任务对象</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>global</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;void></code></span>


    </dd>
</dl>


    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="~getAssignmentData"><span class="type-signature">(async, inner) </span>getAssignmentData<span class="signature">(assignment, params, global)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>

    



<div class="description">
    <p>获取作业的数据。这里已经确保要么提交者为作业的订阅者或发布者。如果这个函数没有返回值，
则会依据情况调用assignmentDataToPlainObject。如果有返回值则会作为响应。</p>
<p>对于本任务，就采用默认的assignmentDataToPlainObject。</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_guess-number.js.html">task-templates/guess-number.js</a>, <a href="task-templates_guess-number.js.html#line438">line 438</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>assignment</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>任务对象</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>global</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;void></code></span>


    </dd>
</dl>


    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="~getTaskData"><span class="type-signature">(async, inner) </span>getTaskData<span class="signature">(task, params, global)</span><span class="type-signature"> &rarr; {Promise.&lt;(object|void)>}</span></h4>

    



<div class="description">
    <p>获取任务的数据。这里已经确保要么提交者为任务的发布者，要么提交者为订阅者且任务处于<code>PUBLISHED</code>状态
如果这个函数没有返回值，则会依据情况调用postTaskDataSchema。如果有返回值则会作为响应。</p>
<p>对于本任务，如果不是发布者，就采用默认的调用taskDataToPlainObject。如果是订阅者且<code>PUBLISHED</code>，
还会返回在<code>userStatus</code>内返回以下几个字段：</p>
<ul>
<li>signed：用户是否已经注册，对于noSignup的任务而言，这永远为真</li>
<li>blocked：用户是否被拒绝参加改任务，对于noSignup或signupMultipleTimes的任务而言，这永远为假</li>
<li>signing：对于非signed用户而言，这个属性表示用户是否正在报名</li>
<li>created：对于任务非submitMultipleTimes且用户signed，表示是否已经创建了一个作业</li>
</ul>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_mark-image.js.html">task-templates/mark-image.js</a>, <a href="task-templates_mark-image.js.html#line212">line 212</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>task</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>任务对象</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>global</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;(object|void)></code></span>


    </dd>
</dl>


    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="~getTaskData"><span class="type-signature">(async, inner) </span>getTaskData<span class="signature">(task, params, global)</span><span class="type-signature"> &rarr; {Promise.&lt;(object|void)>}</span></h4>

    



<div class="description">
    <p>获取任务的数据。这里已经确保要么提交者为任务的发布者，要么提交者为订阅者且任务处于<code>PUBLISHED</code>状态
如果这个函数没有返回值，则会依据情况调用postTaskDataSchema。如果有返回值则会作为响应。</p>
<p>对于本任务，如果不是发布者，就采用默认的调用taskDataToPlainObject。如果是订阅者且<code>PUBLISHED</code>，
还会返回在<code>userStatus</code>内返回以下几个字段：</p>
<ul>
<li>signed：用户是否已经注册，对于noSignup的任务而言，这永远为真</li>
<li>blocked：用户是否被拒绝参加改任务，对于noSignup或signupMultipleTimes的任务而言，这永远为假</li>
<li>signing：对于非signed用户而言，这个属性表示用户是否正在报名</li>
<li>created：对于任务非submitMultipleTimes且用户signed，表示是否已经创建了一个作业</li>
</ul>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_guess-number.js.html">task-templates/guess-number.js</a>, <a href="task-templates_guess-number.js.html#line181">line 181</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>task</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>任务对象</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>global</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;(object|void)></code></span>


    </dd>
</dl>


    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="~postAssignmentData"><span class="type-signature">(async, inner) </span>postAssignmentData<span class="signature">(assignment, params, global)</span><span class="type-signature"> &rarr; {Promise.&lt;object>}</span></h4>

    



<div class="description">
    <p>提交作业的数据，这里已经确保提交者为作业的订阅者，且作业处于<code>EDITING</code>状态。但该作业可能已经
提交过数据，因而应当清除以前的数据。原则上，这个过程结束后，应当重置作业的<code>summary</code>、
<code>valid</code>和<code>data</code>状态。原则上，该过程如果没有返回错误码，<code>valid</code>应当为true。</p>
<p>如果这个函数没有返回值，则会依据情况调用assignmentDataToPlainObject。如果有返回值则会作为响应。</p>
<p>对于本任务的作业而言，情况略有不同，这是有状态的，不可逆的故而不清除数据。主要上传的数据是猜的答案。</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_mark-image.js.html">task-templates/mark-image.js</a>, <a href="task-templates_mark-image.js.html#line431">line 431</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>assignment</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>任务对象</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>请求的数据</p>
<ul>
<li>query 请求的query<ul>
<li>data {boolean} 是否返回数据</li>
</ul>
</li>
<li>data 请求的data<ul>
<li>answer {number} 必须，介于1到选项数量</li>
</ul>
</li>
</ul>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>global</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;object></code></span>


    </dd>
</dl>


    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="~postAssignmentData"><span class="type-signature">(async, inner) </span>postAssignmentData<span class="signature">(assignment, params, global)</span><span class="type-signature"> &rarr; {Promise.&lt;object>}</span></h4>

    



<div class="description">
    <p>提交作业的数据，这里已经确保提交者为作业的订阅者，且作业处于<code>EDITING</code>状态。但该作业可能已经
提交过数据，因而应当清除以前的数据。原则上，这个过程结束后，应当重置作业的<code>summary</code>、
<code>valid</code>和<code>data</code>状态。原则上，该过程如果没有返回错误码，<code>valid</code>应当为true。</p>
<p>如果这个函数没有返回值，则会依据情况调用assignmentDataToPlainObject。如果有返回值则会作为响应。</p>
<p>对于本任务的作业而言，情况略有不同，这是有状态的，不可逆的故而不清除数据。主要上传的数据是猜的答案。
返回的数据还会包含一个额外的字段：</p>
<ul>
<li>compare {number} -1：偏小，0：猜对，1：偏大</li>
</ul>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_guess-number.js.html">task-templates/guess-number.js</a>, <a href="task-templates_guess-number.js.html#line394">line 394</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>assignment</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>任务对象</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>请求的数据</p>
<ul>
<li>query 请求的query<ul>
<li>data {boolean} 是否返回数据</li>
</ul>
</li>
<li>data 请求的data<ul>
<li>guess {number} 必须</li>
</ul>
</li>
</ul>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>global</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;object></code></span>


    </dd>
</dl>


    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="~postAssignmentDataMiddleware"><span class="type-signature">(async, inner) </span>postAssignmentDataMiddleware<span class="signature">(ctx, next)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>

    



<div class="description">
    <p>这是postAssignmentData AJAX请求执行之前的中间件。通常这里用以处理文件上传的multipart请求。
缺省情况下直接调用postAssignmentData。</p>
<p>对于本任务的作业而言，没有文件上传。不做任何处理。</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_mark-image.js.html">task-templates/mark-image.js</a>, <a href="task-templates_mark-image.js.html#line400">line 400</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>ctx</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>next</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>function</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;void></code></span>


    </dd>
</dl>


    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="~postAssignmentDataMiddleware"><span class="type-signature">(async, inner) </span>postAssignmentDataMiddleware<span class="signature">(ctx, next)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>

    



<div class="description">
    <p>这是postAssignmentData AJAX请求执行之前的中间件。通常这里用以处理文件上传的multipart请求。
缺省情况下直接调用postAssignmentData。</p>
<p>对于本任务的作业而言，没有文件上传。不做任何处理。</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_guess-number.js.html">task-templates/guess-number.js</a>, <a href="task-templates_guess-number.js.html#line362">line 362</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>ctx</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>next</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>function</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;void></code></span>


    </dd>
</dl>


    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="~postTaskData"><span class="type-signature">(async, inner) </span>postTaskData<span class="signature">(task, params, global)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>

    



<div class="description">
    <p>提交任务的数据，这里已经确保提交者为任务的发布者，且任务处于<code>EDITING</code>状态。但该任务可能已经
提交过数据，因而应当清除以前的数据。原则上，这个过程结束后，应当重置任务的<code>total</code>、<code>remain</code>、
<code>valid</code>和<code>data</code>状态。原则上，该过程如果没有返回错误码，<code>valid</code>应当为true。</p>
<p>如果这个函数没有返回值，则会依据情况调用taskDataToPlainObject。如果有返回值则会作为响应。</p>
<p>对于本任务而言，主要上传的数据是一些设置选项以及图片。</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_mark-image.js.html">task-templates/mark-image.js</a>, <a href="task-templates_mark-image.js.html#line171">line 171</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>task</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>任务对象</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>请求的数据</p>
<ul>
<li>query 请求的query<ul>
<li>data {boolean} 是否返回数据</li>
</ul>
</li>
<li>data 请求的data<ul>
<li>total {number} 必须，全部的任务(图片)数目，1到100</li>
<li>question {string} 必须，问题</li>
<li>choiceAmount {number} 必须，选项数量，大于0</li>
<li>choices {string[]} 必须，数量须与choiceAmount吻合</li>
<li>submitMultipleTimes {boolean} 可选设置，是否允许一个人参与多次，默认false</li>
<li>signupMultipleTimes {boolean} 可选设置，是否允许一个人被拒后再次报名，默认false</li>
<li>noSignup {boolean} 可选设置，是否无需报名，默认false</li>
<li>submitAutoPass {boolean} 可选设置，是否自动审批任务（即任务提交即接受），默认false</li>
</ul>
</li>
</ul>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>global</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;void></code></span>


    </dd>
</dl>


    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="~postTaskData"><span class="type-signature">(async, inner) </span>postTaskData<span class="signature">(task, params, global)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>

    



<div class="description">
    <p>提交任务的数据，这里已经确保提交者为任务的发布者，且任务处于<code>EDITING</code>状态。但该任务可能已经
提交过数据，因而应当清除以前的数据。原则上，这个过程结束后，应当重置任务的<code>total</code>、<code>remain</code>、
<code>valid</code>和<code>data</code>状态。原则上，该过程如果没有返回错误码，<code>valid</code>应当为true。</p>
<p>如果这个函数没有返回值，则会依据情况调用taskDataToPlainObject。如果有返回值则会作为响应。</p>
<p>对于本任务而言，主要上传的数据是一些设置选项。</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_guess-number.js.html">task-templates/guess-number.js</a>, <a href="task-templates_guess-number.js.html#line137">line 137</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>task</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>任务对象</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>请求的数据</p>
<ul>
<li>query 请求的query<ul>
<li>data {boolean} 是否返回数据</li>
</ul>
</li>
<li>data 请求的data<ul>
<li>min {number} 必须，最小的数值，0到100</li>
<li>max {number} 必须，最大的数值，0到100且min&lt;max</li>
<li>total {number} 可选设置，全部的任务数目，大于0，默认无穷</li>
<li>maxGuessTimes {number} 可选设置，默认无穷</li>
<li>submitMultipleTimes {boolean} 可选设置，是否允许一个人参与多次，默认false</li>
<li>signupMultipleTimes {boolean} 可选设置，是否允许一个人被拒后再次报名，默认false</li>
<li>noSignup {boolean} 可选设置，是否无需报名，默认false</li>
<li>submitAutoPass {boolean} 可选设置，是否自动审批任务（即任务提交即接受），默认false</li>
</ul>
</li>
</ul>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>global</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;void></code></span>


    </dd>
</dl>


    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="~postTaskDataMiddleware"><span class="type-signature">(async, inner) </span>postTaskDataMiddleware<span class="signature">(ctx, next)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>

    



<div class="description">
    <p>这是postTaskData AJAX请求执行之前的中间件。通常这里用以处理文件上传的multipart请求。缺省
情况下直接调用postTaskData。</p>
<p>对于本任务而言，没有文件上传。不做任何处理。</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_guess-number.js.html">task-templates/guess-number.js</a>, <a href="task-templates_guess-number.js.html#line92">line 92</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>ctx</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>next</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>function</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;void></code></span>


    </dd>
</dl>


    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="~postTaskDataMiddleware"><span class="type-signature">(async, inner) </span>postTaskDataMiddleware<span class="signature">(ctx, next)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>

    



<div class="description">
    <p>这是postTaskData AJAX请求执行之前的中间件。通常这里用以处理文件上传的multipart请求。缺省
情况下直接调用postTaskData。
此任务中将上传的压缩包解压至该项目文件夹下。</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_mark-image.js.html">task-templates/mark-image.js</a>, <a href="task-templates_mark-image.js.html#line97">line 97</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>ctx</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>next</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>function</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;void></code></span>


    </dd>
</dl>


    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="~taskDataToPlainObject"><span class="type-signature">(inner) </span>taskDataToPlainObject<span class="signature">(task, auth)</span><span class="type-signature"> &rarr; {object}</span></h4>

    



<div class="description">
    <p>将<code>task.data</code>转换为对象发送给对应可见性的人。这个函数会在postTaskData或者getTaskData返回
undefined的时候默认调用。理论上，调用者要么是任务发布者，要么是订阅者</p>
<p>对本任务而言，而<code>exportedResult</code>只有任务拥有者能获得。</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_mark-image.js.html">task-templates/mark-image.js</a>, <a href="task-templates_mark-image.js.html#line48">line 48</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>task</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>auth</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>object</code></span>


    </dd>
</dl>


    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="~taskDataToPlainObject"><span class="type-signature">(inner) </span>taskDataToPlainObject<span class="signature">(task, auth)</span><span class="type-signature"> &rarr; {object}</span></h4>

    



<div class="description">
    <p>将<code>task.data</code>转换为对象发送给对应可见性的人。这个函数会在postTaskData或者getTaskData返回
undefined的时候默认调用。理论上，调用者要么是任务发布者，要么是订阅者</p>
<p>对本任务而言，而<code>exportedResult</code>只有任务拥有者能获得。</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_guess-number.js.html">task-templates/guess-number.js</a>, <a href="task-templates_guess-number.js.html#line46">line 46</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>task</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>auth</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>object</code></span>


    </dd>
</dl>


    
</div>



</div>
        
    

    

    
</article>

</section>







<section>

<header>
    
        
            
        
            
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description"><p>一个用于比较逗逼的测试任务类型，可以众筹大家在知道整数范围时，猜测出整数需要次数的分布。这里用户
猜测完毕之后可以得到偏大、偏小或者等于。</p>
<p>任务和作业本身的多态性是建立在<code>task.data</code>和<code>assignment.data</code>这两个无schema的数据上的。</p>
<p>就这个猜数字项目<code>task.data</code>主要包含了以下几个字段：</p>
<ul>
<li>min {number} 最小的数值</li>
<li>max {number} 最大的数值</li>
<li>maxGuessTimes {number} 可选设置，默认无穷</li>
<li>submitMultipleTimes {boolean} 可选设置，是否允许一个人参与多次，默认false</li>
<li>signupMultipleTimes {boolean} 可选设置，是否允许一个人被拒后再次报名，默认false</li>
<li>noSignup {boolean} 可选设置，是否自动完成报名的步骤（即无需报名），默认false</li>
<li>submitAutoPass {boolean} 可选设置，是否自动审批任务（即任务提交即接受），默认false</li>
<li>dir {string} 内部使用，这是<code>uploads</code>目录下属于该工程的文件夹。</li>
<li>signedUsers {string[]} 内部使用，对于非noSignup，这是报名了的用户的列表</li>
<li>blockedUsers {string[]} 内部使用，对于非noSignup且非signupMultipleTimes，这是封禁用户的列表</li>
<li>exported {boolean} 内部使用，项目是否导出</li>
</ul>
<p>而<code>assignment.data</code>主要包含了以下几个字段，而<code>assignment.valid</code>对于非signup类任务，表示能否继续猜：</p>
<ul>
<li>signup {boolean} 表示这是一个用于注册的任务</li>
<li>answer {boolean} 对于非signup类任务，这是真正的答案</li>
<li>guesses {number} 对于非signup类任务，这是猜测的次数</li>
</ul></div>
        

        
            
<div class="section-method">







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_mark-image.js.html">task-templates/mark-image.js</a>, <a href="task-templates_mark-image.js.html#line1">line 1</a>
    </li></ul></dd>
    

    

    

    
</dl>























</div>
        
            
<div class="section-method">







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_guess-number.js.html">task-templates/guess-number.js</a>, <a href="task-templates_guess-number.js.html#line1">line 1</a>
    </li></ul></dd>
    

    

    

    
</dl>























</div>
        
    
    </div>

    

    

    

     

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            
<div class="section-method">

    

    <h4 class="name" id="~assignmentDataToPlainObject"><span class="type-signature">(inner) </span>assignmentDataToPlainObject<span class="signature">(assignment, auth)</span><span class="type-signature"> &rarr; {object}</span></h4>

    



<div class="description">
    <p>将<code>assignment.data</code>转换为对象发送给对应可见性的人。这个函数会在createAssignment、
getAssignmentData或者getAssignmentData返回undefined的时候默认调用。
理论上，调用者是订阅者或者发布者。</p>
<p>对本任务而言，只有作业是一个非报名作业才返回数据，如下：</p>
<ul>
<li>sequence {number} 题号</li>
<li>finished {boolean} 是否完成</li>
<li>answer {number} 答案</li>
<li>image {string} 图片名，在task.data.dir下</li>
</ul>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_mark-image.js.html">task-templates/mark-image.js</a>, <a href="task-templates_mark-image.js.html#line260">line 260</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>assignment</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>auth</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>object</code></span>


    </dd>
</dl>


    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="~assignmentDataToPlainObject"><span class="type-signature">(inner) </span>assignmentDataToPlainObject<span class="signature">(assignment, auth)</span><span class="type-signature"> &rarr; {object}</span></h4>

    



<div class="description">
    <p>将<code>assignment.data</code>转换为对象发送给对应可见性的人。这个函数会在createAssignment、
getAssignmentData或者getAssignmentData返回undefined的时候默认调用。
理论上，调用者是订阅者或者发布者。</p>
<p>对本任务而言，只有作业是一个非报名作业才返回数据，如下：</p>
<ul>
<li>guessTimes {number} 猜测次数</li>
<li>finished {boolean} 是否完成</li>
<li>answer {boolean} 答案（完成之后才返回）</li>
</ul>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_guess-number.js.html">task-templates/guess-number.js</a>, <a href="task-templates_guess-number.js.html#line228">line 228</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>assignment</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>auth</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>object</code></span>


    </dd>
</dl>


    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="~assignmentStatusChanged"><span class="type-signature">(async, inner) </span>assignmentStatusChanged<span class="signature">(assignment, params, global)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>

    



<div class="description">
    <p>这个函数是作业状态更改的钩子，确保作业的状态发生更改，可能的更改包括订阅者从编辑到提交，同时作业必须为valid，
以及发布者从提交到接受或拒绝。assignment会被保存。</p>
<p>本任务主要是处理自动pass和验证通过的逻辑的。</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_guess-number.js.html">task-templates/guess-number.js</a>, <a href="task-templates_guess-number.js.html#line327">line 327</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>assignment</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>global</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;void></code></span>


    </dd>
</dl>


    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="~assignmentStatusChanged"><span class="type-signature">(async, inner) </span>assignmentStatusChanged<span class="signature">(assignment, params, global)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>

    



<div class="description">
    <p>这个函数是作业状态更改的钩子，确保作业的状态发生更改，可能的更改包括订阅者从编辑到提交，同时作业必须为valid，
以及发布者从提交到接受或拒绝。assignment会被保存。</p>
<p>本任务主要是处理自动pass和验证通过的逻辑的。</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_mark-image.js.html">task-templates/mark-image.js</a>, <a href="task-templates_mark-image.js.html#line365">line 365</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>assignment</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>global</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;void></code></span>


    </dd>
</dl>


    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="~createAssignment"><span class="type-signature">(async, inner) </span>createAssignment<span class="signature">(task, assignment, params, global)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>

    



<div class="description">
    <p>创建任务，这里已经确保提交者为订阅者，且任务处于<code>PUBLISHED</code>状态。原则上，这个过程结束后，
应当设置好<code>valid</code>、<code>status</code>、<code>summary</code>、<code>data</code>的字段。如果该函数缺省，则会创建一个
不valid、编辑状态、无<code>summary</code>和<code>data</code>字段的任务。assignment会被保存。</p>
<p>如果这个函数没有返回值，则依据情况调用assignmentDataToPlainObject。
如果有返回值则会作为响应。</p>
<p>对于本任务而言，主要确认创建的是一个报名作业还是图片标注作业。</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_mark-image.js.html">task-templates/mark-image.js</a>, <a href="task-templates_mark-image.js.html#line303">line 303</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>task</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>任务对象</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>assignment</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>作业对象</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>请求的数据</p>
<ul>
<li>query 请求的query<ul>
<li>populate {boolean} 是否返回</li>
<li>data {boolean} 是否返回数据</li>
</ul>
</li>
<li>data 请求的data<ul>
<li>task {string} 任务</li>
<li>data {object} 额外的数据<ul>
<li>signup {boolean} 是否是报名任务</li>
</ul>
</li>
</ul>
</li>
</ul>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>global</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;void></code></span>


    </dd>
</dl>


    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="~createAssignment"><span class="type-signature">(async, inner) </span>createAssignment<span class="signature">(task, assignment, params, global)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>

    



<div class="description">
    <p>创建任务，这里已经确保提交者为订阅者，且任务处于<code>PUBLISHED</code>状态。原则上，这个过程结束后，
应当设置好<code>valid</code>、<code>status</code>、<code>summary</code>、<code>data</code>的字段。如果该函数缺省，则会创建一个
不valid、编辑状态、无<code>summary</code>和<code>data</code>字段的任务。assignment会被保存。</p>
<p>如果这个函数没有返回值，则依据情况调用assignmentDataToPlainObject。
如果有返回值则会作为响应。</p>
<p>对于本任务而言，主要确认创建的是一个报名作业还是真正的猜数字作业。</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_guess-number.js.html">task-templates/guess-number.js</a>, <a href="task-templates_guess-number.js.html#line271">line 271</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>task</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>任务对象</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>assignment</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>作业对象</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>请求的数据</p>
<ul>
<li>query 请求的query<ul>
<li>populate {boolean} 是否返回</li>
<li>data {boolean} 是否返回数据</li>
</ul>
</li>
<li>data 请求的data<ul>
<li>task {string} 任务</li>
<li>data {object} 额外的数据<ul>
<li>signup {boolean} 是否是报名任务</li>
</ul>
</li>
</ul>
</li>
</ul>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>global</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;void></code></span>


    </dd>
</dl>


    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="~getAssignmentData"><span class="type-signature">(async, inner) </span>getAssignmentData<span class="signature">(assignment, params, global)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>

    



<div class="description">
    <p>获取作业的数据。这里已经确保要么提交者为作业的订阅者或发布者。如果这个函数没有返回值，
则会依据情况调用assignmentDataToPlainObject。如果有返回值则会作为响应。</p>
<p>对于本任务，就采用默认的assignmentDataToPlainObject。</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_mark-image.js.html">task-templates/mark-image.js</a>, <a href="task-templates_mark-image.js.html#line457">line 457</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>assignment</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>任务对象</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>global</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;void></code></span>


    </dd>
</dl>


    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="~getAssignmentData"><span class="type-signature">(async, inner) </span>getAssignmentData<span class="signature">(assignment, params, global)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>

    



<div class="description">
    <p>获取作业的数据。这里已经确保要么提交者为作业的订阅者或发布者。如果这个函数没有返回值，
则会依据情况调用assignmentDataToPlainObject。如果有返回值则会作为响应。</p>
<p>对于本任务，就采用默认的assignmentDataToPlainObject。</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_guess-number.js.html">task-templates/guess-number.js</a>, <a href="task-templates_guess-number.js.html#line438">line 438</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>assignment</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>任务对象</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>global</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;void></code></span>


    </dd>
</dl>


    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="~getTaskData"><span class="type-signature">(async, inner) </span>getTaskData<span class="signature">(task, params, global)</span><span class="type-signature"> &rarr; {Promise.&lt;(object|void)>}</span></h4>

    



<div class="description">
    <p>获取任务的数据。这里已经确保要么提交者为任务的发布者，要么提交者为订阅者且任务处于<code>PUBLISHED</code>状态
如果这个函数没有返回值，则会依据情况调用postTaskDataSchema。如果有返回值则会作为响应。</p>
<p>对于本任务，如果不是发布者，就采用默认的调用taskDataToPlainObject。如果是订阅者且<code>PUBLISHED</code>，
还会返回在<code>userStatus</code>内返回以下几个字段：</p>
<ul>
<li>signed：用户是否已经注册，对于noSignup的任务而言，这永远为真</li>
<li>blocked：用户是否被拒绝参加改任务，对于noSignup或signupMultipleTimes的任务而言，这永远为假</li>
<li>signing：对于非signed用户而言，这个属性表示用户是否正在报名</li>
<li>created：对于任务非submitMultipleTimes且用户signed，表示是否已经创建了一个作业</li>
</ul>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_mark-image.js.html">task-templates/mark-image.js</a>, <a href="task-templates_mark-image.js.html#line212">line 212</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>task</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>任务对象</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>global</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;(object|void)></code></span>


    </dd>
</dl>


    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="~getTaskData"><span class="type-signature">(async, inner) </span>getTaskData<span class="signature">(task, params, global)</span><span class="type-signature"> &rarr; {Promise.&lt;(object|void)>}</span></h4>

    



<div class="description">
    <p>获取任务的数据。这里已经确保要么提交者为任务的发布者，要么提交者为订阅者且任务处于<code>PUBLISHED</code>状态
如果这个函数没有返回值，则会依据情况调用postTaskDataSchema。如果有返回值则会作为响应。</p>
<p>对于本任务，如果不是发布者，就采用默认的调用taskDataToPlainObject。如果是订阅者且<code>PUBLISHED</code>，
还会返回在<code>userStatus</code>内返回以下几个字段：</p>
<ul>
<li>signed：用户是否已经注册，对于noSignup的任务而言，这永远为真</li>
<li>blocked：用户是否被拒绝参加改任务，对于noSignup或signupMultipleTimes的任务而言，这永远为假</li>
<li>signing：对于非signed用户而言，这个属性表示用户是否正在报名</li>
<li>created：对于任务非submitMultipleTimes且用户signed，表示是否已经创建了一个作业</li>
</ul>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_guess-number.js.html">task-templates/guess-number.js</a>, <a href="task-templates_guess-number.js.html#line181">line 181</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>task</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>任务对象</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>global</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;(object|void)></code></span>


    </dd>
</dl>


    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="~postAssignmentData"><span class="type-signature">(async, inner) </span>postAssignmentData<span class="signature">(assignment, params, global)</span><span class="type-signature"> &rarr; {Promise.&lt;object>}</span></h4>

    



<div class="description">
    <p>提交作业的数据，这里已经确保提交者为作业的订阅者，且作业处于<code>EDITING</code>状态。但该作业可能已经
提交过数据，因而应当清除以前的数据。原则上，这个过程结束后，应当重置作业的<code>summary</code>、
<code>valid</code>和<code>data</code>状态。原则上，该过程如果没有返回错误码，<code>valid</code>应当为true。</p>
<p>如果这个函数没有返回值，则会依据情况调用assignmentDataToPlainObject。如果有返回值则会作为响应。</p>
<p>对于本任务的作业而言，情况略有不同，这是有状态的，不可逆的故而不清除数据。主要上传的数据是猜的答案。</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_mark-image.js.html">task-templates/mark-image.js</a>, <a href="task-templates_mark-image.js.html#line431">line 431</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>assignment</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>任务对象</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>请求的数据</p>
<ul>
<li>query 请求的query<ul>
<li>data {boolean} 是否返回数据</li>
</ul>
</li>
<li>data 请求的data<ul>
<li>answer {number} 必须，介于1到选项数量</li>
</ul>
</li>
</ul>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>global</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;object></code></span>


    </dd>
</dl>


    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="~postAssignmentData"><span class="type-signature">(async, inner) </span>postAssignmentData<span class="signature">(assignment, params, global)</span><span class="type-signature"> &rarr; {Promise.&lt;object>}</span></h4>

    



<div class="description">
    <p>提交作业的数据，这里已经确保提交者为作业的订阅者，且作业处于<code>EDITING</code>状态。但该作业可能已经
提交过数据，因而应当清除以前的数据。原则上，这个过程结束后，应当重置作业的<code>summary</code>、
<code>valid</code>和<code>data</code>状态。原则上，该过程如果没有返回错误码，<code>valid</code>应当为true。</p>
<p>如果这个函数没有返回值，则会依据情况调用assignmentDataToPlainObject。如果有返回值则会作为响应。</p>
<p>对于本任务的作业而言，情况略有不同，这是有状态的，不可逆的故而不清除数据。主要上传的数据是猜的答案。
返回的数据还会包含一个额外的字段：</p>
<ul>
<li>compare {number} -1：偏小，0：猜对，1：偏大</li>
</ul>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_guess-number.js.html">task-templates/guess-number.js</a>, <a href="task-templates_guess-number.js.html#line394">line 394</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>assignment</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>任务对象</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>请求的数据</p>
<ul>
<li>query 请求的query<ul>
<li>data {boolean} 是否返回数据</li>
</ul>
</li>
<li>data 请求的data<ul>
<li>guess {number} 必须</li>
</ul>
</li>
</ul>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>global</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;object></code></span>


    </dd>
</dl>


    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="~postAssignmentDataMiddleware"><span class="type-signature">(async, inner) </span>postAssignmentDataMiddleware<span class="signature">(ctx, next)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>

    



<div class="description">
    <p>这是postAssignmentData AJAX请求执行之前的中间件。通常这里用以处理文件上传的multipart请求。
缺省情况下直接调用postAssignmentData。</p>
<p>对于本任务的作业而言，没有文件上传。不做任何处理。</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_mark-image.js.html">task-templates/mark-image.js</a>, <a href="task-templates_mark-image.js.html#line400">line 400</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>ctx</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>next</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>function</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;void></code></span>


    </dd>
</dl>


    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="~postAssignmentDataMiddleware"><span class="type-signature">(async, inner) </span>postAssignmentDataMiddleware<span class="signature">(ctx, next)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>

    



<div class="description">
    <p>这是postAssignmentData AJAX请求执行之前的中间件。通常这里用以处理文件上传的multipart请求。
缺省情况下直接调用postAssignmentData。</p>
<p>对于本任务的作业而言，没有文件上传。不做任何处理。</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_guess-number.js.html">task-templates/guess-number.js</a>, <a href="task-templates_guess-number.js.html#line362">line 362</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>ctx</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>next</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>function</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;void></code></span>


    </dd>
</dl>


    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="~postTaskData"><span class="type-signature">(async, inner) </span>postTaskData<span class="signature">(task, params, global)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>

    



<div class="description">
    <p>提交任务的数据，这里已经确保提交者为任务的发布者，且任务处于<code>EDITING</code>状态。但该任务可能已经
提交过数据，因而应当清除以前的数据。原则上，这个过程结束后，应当重置任务的<code>total</code>、<code>remain</code>、
<code>valid</code>和<code>data</code>状态。原则上，该过程如果没有返回错误码，<code>valid</code>应当为true。</p>
<p>如果这个函数没有返回值，则会依据情况调用taskDataToPlainObject。如果有返回值则会作为响应。</p>
<p>对于本任务而言，主要上传的数据是一些设置选项以及图片。</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_mark-image.js.html">task-templates/mark-image.js</a>, <a href="task-templates_mark-image.js.html#line171">line 171</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>task</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>任务对象</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>请求的数据</p>
<ul>
<li>query 请求的query<ul>
<li>data {boolean} 是否返回数据</li>
</ul>
</li>
<li>data 请求的data<ul>
<li>total {number} 必须，全部的任务(图片)数目，1到100</li>
<li>question {string} 必须，问题</li>
<li>choiceAmount {number} 必须，选项数量，大于0</li>
<li>choices {string[]} 必须，数量须与choiceAmount吻合</li>
<li>submitMultipleTimes {boolean} 可选设置，是否允许一个人参与多次，默认false</li>
<li>signupMultipleTimes {boolean} 可选设置，是否允许一个人被拒后再次报名，默认false</li>
<li>noSignup {boolean} 可选设置，是否无需报名，默认false</li>
<li>submitAutoPass {boolean} 可选设置，是否自动审批任务（即任务提交即接受），默认false</li>
</ul>
</li>
</ul>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>global</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;void></code></span>


    </dd>
</dl>


    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="~postTaskData"><span class="type-signature">(async, inner) </span>postTaskData<span class="signature">(task, params, global)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>

    



<div class="description">
    <p>提交任务的数据，这里已经确保提交者为任务的发布者，且任务处于<code>EDITING</code>状态。但该任务可能已经
提交过数据，因而应当清除以前的数据。原则上，这个过程结束后，应当重置任务的<code>total</code>、<code>remain</code>、
<code>valid</code>和<code>data</code>状态。原则上，该过程如果没有返回错误码，<code>valid</code>应当为true。</p>
<p>如果这个函数没有返回值，则会依据情况调用taskDataToPlainObject。如果有返回值则会作为响应。</p>
<p>对于本任务而言，主要上传的数据是一些设置选项。</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_guess-number.js.html">task-templates/guess-number.js</a>, <a href="task-templates_guess-number.js.html#line137">line 137</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>task</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>任务对象</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>请求的数据</p>
<ul>
<li>query 请求的query<ul>
<li>data {boolean} 是否返回数据</li>
</ul>
</li>
<li>data 请求的data<ul>
<li>min {number} 必须，最小的数值，0到100</li>
<li>max {number} 必须，最大的数值，0到100且min&lt;max</li>
<li>total {number} 可选设置，全部的任务数目，大于0，默认无穷</li>
<li>maxGuessTimes {number} 可选设置，默认无穷</li>
<li>submitMultipleTimes {boolean} 可选设置，是否允许一个人参与多次，默认false</li>
<li>signupMultipleTimes {boolean} 可选设置，是否允许一个人被拒后再次报名，默认false</li>
<li>noSignup {boolean} 可选设置，是否无需报名，默认false</li>
<li>submitAutoPass {boolean} 可选设置，是否自动审批任务（即任务提交即接受），默认false</li>
</ul>
</li>
</ul>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>global</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;void></code></span>


    </dd>
</dl>


    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="~postTaskDataMiddleware"><span class="type-signature">(async, inner) </span>postTaskDataMiddleware<span class="signature">(ctx, next)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>

    



<div class="description">
    <p>这是postTaskData AJAX请求执行之前的中间件。通常这里用以处理文件上传的multipart请求。缺省
情况下直接调用postTaskData。</p>
<p>对于本任务而言，没有文件上传。不做任何处理。</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_guess-number.js.html">task-templates/guess-number.js</a>, <a href="task-templates_guess-number.js.html#line92">line 92</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>ctx</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>next</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>function</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;void></code></span>


    </dd>
</dl>


    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="~postTaskDataMiddleware"><span class="type-signature">(async, inner) </span>postTaskDataMiddleware<span class="signature">(ctx, next)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>

    



<div class="description">
    <p>这是postTaskData AJAX请求执行之前的中间件。通常这里用以处理文件上传的multipart请求。缺省
情况下直接调用postTaskData。
此任务中将上传的压缩包解压至该项目文件夹下。</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_mark-image.js.html">task-templates/mark-image.js</a>, <a href="task-templates_mark-image.js.html#line97">line 97</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>ctx</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>next</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>function</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Promise.&lt;void></code></span>


    </dd>
</dl>


    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="~taskDataToPlainObject"><span class="type-signature">(inner) </span>taskDataToPlainObject<span class="signature">(task, auth)</span><span class="type-signature"> &rarr; {object}</span></h4>

    



<div class="description">
    <p>将<code>task.data</code>转换为对象发送给对应可见性的人。这个函数会在postTaskData或者getTaskData返回
undefined的时候默认调用。理论上，调用者要么是任务发布者，要么是订阅者</p>
<p>对本任务而言，而<code>exportedResult</code>只有任务拥有者能获得。</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_mark-image.js.html">task-templates/mark-image.js</a>, <a href="task-templates_mark-image.js.html#line48">line 48</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>task</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>auth</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>object</code></span>


    </dd>
</dl>


    
</div>



</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="~taskDataToPlainObject"><span class="type-signature">(inner) </span>taskDataToPlainObject<span class="signature">(task, auth)</span><span class="type-signature"> &rarr; {object}</span></h4>

    



<div class="description">
    <p>将<code>task.data</code>转换为对象发送给对应可见性的人。这个函数会在postTaskData或者getTaskData返回
undefined的时候默认调用。理论上，调用者要么是任务发布者，要么是订阅者</p>
<p>对本任务而言，而<code>exportedResult</code>只有任务拥有者能获得。</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="task-templates_guess-number.js.html">task-templates/guess-number.js</a>, <a href="task-templates_guess-number.js.html#line46">line 46</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>task</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>auth</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>object</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>object</code></span>


    </dd>
</dl>


    
</div>



</div>
        
    

    

    
</article>

</section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Wed Jan 03 2018 18:17:33 GMT+0000 (UTC) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>